<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修element-ui表单验证无效解决' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>element-ui表单验证无效解决</center></div><div class='banquan'>原文出处:本文由博客园博主jackzer提供。<br/>
原文连接:https://www.cnblogs.com/jackzer666/p/11385343.html</div><br>
    <p>最近在项目中遇到了一个需求，需要动态增减表单元素，同时给新增的表单元素增加校验规则。</p>
<p><a href="https://element.eleme.cn/2.11/#/zh-CN/component/form" target="_blank">element-ui官网</a>给出了解决方案：点击新增按钮时，向循环渲染的数组中push新的对象，数据驱动视图，通过增加数据的方式来增加新的dom元素；同样的，通过删除循环遍历的数据来达到删除dom的效果。</p>
<p>但是，校验规则不起作用，即使填写了表单已经提示未填写。在仔细检查后发现，element-ui的表单校验规则中，<strong>el-form-item绑定的prop必须和该item下的表单元素绑定的v-model值的名称一致</strong>。但和通常表单不同的是，该表单是动态增减的，<strong>对应el-form-item需要绑定的prop值必须带上遍历的索引值index:</strong></p>
<div class="cnblogs_Highlighter">
<div class="cnblogs_code">
<pre><code>&lt;el-form <span style="color: #0000ff;">ref</span>=<span style="color: #800000;">"</span><span style="color: #800000;">...</span><span style="color: #800000;">"</span> :model=<span style="color: #800000;">"</span><span style="color: #800000;">test</span><span style="color: #800000;">"</span>&gt;
  &lt;div v-<span style="color: #0000ff;">for</span>=<span style="color: #800000;">"</span><span style="color: #800000;">(item, index) in test.line</span><span style="color: #800000;">"</span> :key=<span style="color: #800000;">"</span><span style="color: #800000;">index</span><span style="color: #800000;">"</span>&gt;
    &lt;el-form-item :prop=<span style="color: #800000;">"</span><span style="color: #800000;">'line.'+index+'.value1'</span><span style="color: #800000;">"</span> :rules=<span style="color: #800000;">"</span><span style="color: #800000;">{...}</span><span style="color: #800000;">"</span>&gt;
      &lt;el-input v-model=<span style="color: #800000;">"</span><span style="color: #800000;">item.value1</span><span style="color: #800000;">"</span>&gt;&lt;/el-input&gt;
    &lt;/el-form-item&gt;
    &lt;el-form-item :prop=<span style="color: #800000;">"</span><span style="color: #800000;">'line.'+index+'.value2'</span><span style="color: #800000;">"</span> :rules=<span style="color: #800000;">"</span><span style="color: #800000;">{...}</span><span style="color: #800000;">"</span>&gt;
      &lt;el-input v-model=<span style="color: #800000;">"</span><span style="color: #800000;">item.value2</span><span style="color: #800000;">"</span>&gt;&lt;/el-input&gt;
    &lt;/el-form-item&gt;
  &lt;div&gt;
&lt;/el-form&gt;

&lt;script&gt;<span style="color: #000000;">
export </span><span style="color: #0000ff;">default</span><span style="color: #000000;"> {
  data() {
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> {
      test: {
        ...,
　　　   line: [{
          value1: </span><span style="color: #800000;">''</span><span style="color: #000000;">,
          value2: </span><span style="color: #800000;">''</span><span style="color: #000000;">
        }]
      }
    }
  }
}
</span>&lt;/script&gt;</pre>
</div>
<p>&nbsp;</p>
</div>
<p>完整代码见<a href="https://element.eleme.cn/2.11/#/zh-CN/component/form" target="_blank">element-ui官网</a>的动态增减表单项</p>
<h4>&nbsp;</h4>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>