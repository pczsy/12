<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修可滑动日期的场地申请' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>可滑动日期的场地申请</center></div><div class='banquan'>原文出处:本文由博客园博主TenFly提供。<br/>
原文连接:https://www.cnblogs.com/tenfly/p/11700580.html</div><br>
    <p>先上图</p>
<p><img src="./images/可滑动日期的场地申请0.png" alt="" width="350" height="629" /></p>
<p><img src="./images/可滑动日期的场地申请1.png" alt="" width="348" height="617" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">　　&lt;</span><span style="color: #800000;">header </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="mui-bar mui-bar-nav"</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">a </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">a</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h1 </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="mui-title"</span><span style="color: #ff0000;"> id</span><span style="color: #0000ff;">="site_name"</span><span style="color: #0000ff;">&gt;</span>预约情况<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h1</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">header</span><span style="color: #0000ff;">&gt;</span>
    
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="mui-content"</span><span style="color: #0000ff;">&gt;</span>
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="selectTime"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
        
        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="weekDay"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>

        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="siteInfo"</span><span style="color: #ff0000;"> style</span><span style="color: #0000ff;">="width:100%"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>

        <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">button </span><span style="color: #ff0000;">class</span><span style="color: #0000ff;">="btn"</span><span style="color: #0000ff;">&gt;</span>预约<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">button</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<div class="cnblogs_code">
<pre><code><span style="color: #800000;">　　　　#selectTime </span>{<span style="color: #ff0000;">
            display</span>:<span style="color: #0000ff;">inline-block</span>;<span style="color: #ff0000;">
            width</span>:<span style="color: #0000ff;"> 100%</span>;<span style="color: #ff0000;">
            height</span>:<span style="color: #0000ff;">40px</span>;<span style="color: #ff0000;">
            line-height</span>:<span style="color: #0000ff;"> 40px</span>;<span style="color: #ff0000;">
            white-space</span>:<span style="color: #0000ff;"> nowrap</span>;<span style="color: #ff0000;">
            box-shadow</span>:<span style="color: #0000ff;"> 0 1px 2px rgba(0,0,0,.1)</span>;<span style="color: #ff0000;">
            overflow-x</span>:<span style="color: #0000ff;"> scroll</span>;<span style="color: #ff0000;">
            overflow-y</span>:<span style="color: #0000ff;"> hidden</span>;<span style="color: #ff0000;">
            -webkit-backface-visibility</span>:<span style="color: #0000ff;"> hidden</span>;<span style="color: #ff0000;">
            -webkit-perspective</span>:<span style="color: #0000ff;"> 1000</span>;<span style="color: #ff0000;">
            -webkit-overflow-scrolling</span>:<span style="color: #0000ff;"> touch</span>;<span style="color: #ff0000;">
            text-align</span>:<span style="color: #0000ff;"> justify</span>;<span style="color: #ff0000;">
            padding</span>:<span style="color: #0000ff;"> 0px 5px</span>;<span style="color: #ff0000;">
            box-sizing</span>:<span style="color: #0000ff;"> border-box</span>;
        }<span style="color: #800000;">
        #selectTime a</span>{<span style="color: #ff0000;">
            text-decoration</span>:<span style="color: #0000ff;"> none</span>;<span style="color: #ff0000;">
            margin-right</span>:<span style="color: #0000ff;"> 10px</span>;<span style="color: #ff0000;">
            padding</span>:<span style="color: #0000ff;">5px</span>;
        }<span style="color: #800000;">
        #selectTime::-webkit-scrollbar</span>{<span style="color: #ff0000;">
            display</span>:<span style="color: #0000ff;"> none</span>;
        }<span style="color: #800000;">
        #weekDay </span>{<span style="color: #ff0000;">
            width</span>:<span style="color: #0000ff;">40px</span>;<span style="color: #ff0000;">
            height</span>:<span style="color: #0000ff;">40px</span>;<span style="color: #ff0000;">
            border-radius</span>:<span style="color: #0000ff;">50%</span>;<span style="color: #ff0000;">
            margin</span>:<span style="color: #0000ff;">12px 0 0 12px</span>;<span style="color: #ff0000;">
            text-align</span>:<span style="color: #0000ff;">center</span>;<span style="color: #ff0000;">
            line-height</span>:<span style="color: #0000ff;">40px</span>;<span style="color: #ff0000;">
            background</span>:<span style="color: #0000ff;">rgba(255,128,128,1)</span>;<span style="color: #ff0000;">
            color</span>:<span style="color: #0000ff;">white</span>;<span style="color: #ff0000;">
            box-shadow</span>:<span style="color: #0000ff;">3px 3px 5px black</span>;
        }<span style="color: #800000;">
        .weekDaySelected </span>{<span style="color: #ff0000;">
            font-size</span>:<span style="color: #0000ff;">20px</span>;<span style="color: #ff0000;">
            font-weight</span>:<span style="color: #0000ff;">bold</span>;<span style="color: #ff0000;">
            color</span>:<span style="color: #0000ff;">rgba(255,128,128,1)</span>;
        }<span style="color: #800000;">
        table tr td </span>{<span style="color: #ff0000;">
            padding</span>:<span style="color: #0000ff;">10px</span>;
        }<span style="color: #800000;">
        .siteName </span>{<span style="color: #ff0000;">
            height</span>:<span style="color: #0000ff;">60px</span>;<span style="color: #ff0000;">
            background</span>:<span style="color: #0000ff;">#C2C2C2</span>;<span style="color: #ff0000;">
            border-radius</span>:<span style="color: #0000ff;">6px</span>;<span style="color: #ff0000;">
            text-align</span>:<span style="color: #0000ff;">center</span>;
        }<span style="color: #800000;">
        .time </span>{<span style="color: #ff0000;">
            width</span>:<span style="color: #0000ff;">40%</span>;<span style="color: #ff0000;">
            height</span>:<span style="color: #0000ff;">40px</span>;<span style="color: #ff0000;">
            background</span>:<span style="color: #0000ff;">rgba(255,128,172,1)</span>;<span style="color: #ff0000;">
            border-radius</span>:<span style="color: #0000ff;">6px</span>;<span style="color: #ff0000;">
            text-align</span>:<span style="color: #0000ff;">center</span>;<span style="color: #ff0000;">
            color</span>:<span style="color: #0000ff;">white</span>;
        }<span style="color: #800000;">
        .reason </span>{<span style="color: #ff0000;">
            height</span>:<span style="color: #0000ff;">40px</span>;<span style="color: #ff0000;">
            background</span>:<span style="color: #0000ff;">rgba(113,184,255,1)</span>;<span style="color: #ff0000;">
            border-radius</span>:<span style="color: #0000ff;">6px</span>;<span style="color: #ff0000;">
            text-align</span>:<span style="color: #0000ff;">right</span>;<span style="color: #ff0000;">
            color</span>:<span style="color: #0000ff;">white</span>;
        }<span style="color: #800000;">
       
        .a_fontColor </span>{<span style="color: #ff0000;">
            color</span>:<span style="color: #0000ff;">#999999</span>;
        }<span style="color: #800000;">    
        .btn </span>{<span style="color: #ff0000;">
            width</span>:<span style="color: #0000ff;">90%</span>;<span style="color: #ff0000;">
            height</span>:<span style="color: #0000ff;">50px</span>;<span style="color: #ff0000;">
            background</span>:<span style="color: #0000ff;">rgba(38,153,251,1)</span>;<span style="color: #ff0000;">
            color</span>:<span style="color: #0000ff;">white</span>;<span style="color: #ff0000;">
            border-radius</span>:<span style="color: #0000ff;">6px</span>;<span style="color: #ff0000;">
            display</span>:<span style="color: #0000ff;">block</span>;<span style="color: #ff0000;">
            margin</span>:<span style="color: #0000ff;">50px auto</span>;<span style="color: #ff0000;">
            font-size</span>:<span style="color: #0000ff;">18px</span>;  
        }</pre>
</div>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">/*</span><span style="color: #008000;">*************************************************截取url参数*************************************************</span><span style="color: #008000;">*/</span>

    <span style="color: #0000ff;">var</span> siteID = getUrlData().id;<span style="color: #008000;">//</span><span style="color: #008000;">场地类型</span>
    <span style="color: #0000ff;">var</span> siteName = decodeURI(getUrlData().name);<span style="color: #008000;">//</span><span style="color: #008000;">场地名称</span>
    <span style="color: #0000ff;">function</span><span style="color: #000000;"> getUrlData() {
        </span><span style="color: #0000ff;">var</span> url =<span style="color: #000000;"> window.location.search;  
        url </span>= url.substring(1<span style="color: #000000;">); 
        </span><span style="color: #0000ff;">var</span> dataObj =<span style="color: #000000;"> {};
        </span><span style="color: #0000ff;">if</span> (url.indexOf('&amp;') &gt; -1<span style="color: #000000;">) {
            url </span>= url.split('&amp;'<span style="color: #000000;">);
            </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> i = 0; i &lt; url.length; i++<span style="color: #000000;">) {
                </span><span style="color: #0000ff;">var</span> arr = url[i].split('='<span style="color: #000000;">);
                dataObj[arr[</span>0]] = arr[1<span style="color: #000000;">];
            }
        }
        </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
            url </span>= url.split('='<span style="color: #000000;">);
            dataObj[url[</span>0]] = url[1<span style="color: #000000;">];
        }
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> dataObj;
    }

    </span><span style="color: #008000;">/*</span><span style="color: #008000;">*************************************************初始化加载数据*************************************************</span><span style="color: #008000;">*/</span>
    
    <span style="color: #0000ff;">var</span> initTime = <span style="color: #0000ff;">new</span> Date();<span style="color: #008000;">//</span><span style="color: #008000;">时间</span>
    <span style="color: #0000ff;">var</span> client_width = window.innerWidth || document.documentElement.clientinnerWidth || document.body.clientinnerWidth;<span style="color: #008000;">//</span><span style="color: #008000;">可视界面宽度</span>
<span style="color: #000000;">
    get_month_day();</span><span style="color: #008000;">//</span><span style="color: #008000;">加载日期</span>
    getSite();<span style="color: #008000;">//</span><span style="color: #008000;">加载对应日期数据</span>
   
    <span style="color: #008000;">//</span><span style="color: #008000;">加载日期</span>
    <span style="color: #0000ff;">function</span><span style="color: #000000;"> get_month_day() {
        </span><span style="color: #0000ff;">var</span> year =<span style="color: #000000;"> initTime.getFullYear();
        </span><span style="color: #0000ff;">var</span> month = initTime.getMonth() + 1<span style="color: #000000;">;
        </span><span style="color: #0000ff;">var</span> day =<span style="color: #000000;"> initTime.getDate();
        
        $(</span>"#selectTime").append('&lt;a onclick="goPre()"&gt;&amp;lt&amp;ltGO&lt;/a&gt;'<span style="color: #000000;">);
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> i = 1; i &lt;= getDaysInMonth(year, month) ; i++<span style="color: #000000;">) {

            </span><span style="color: #0000ff;">var</span> newDate = <span style="color: #0000ff;">new</span> Date().setDate(i - 1<span style="color: #000000;">);
            </span><span style="color: #0000ff;">var</span> weekDay = <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(newDate).getDay();
            </span><span style="color: #0000ff;">if</span> (i ==<span style="color: #000000;"> day)
                </span><span style="color: #0000ff;">var</span> li = '&lt;a class="weekDaySelected"&gt;' + month + '-' + i + '&lt;/a&gt;'<span style="color: #000000;">;
            </span><span style="color: #0000ff;">else</span>
                <span style="color: #0000ff;">var</span> li = '&lt;a class="a_fontColor" onclick="a_click(this)"&gt;' + month + '-' + i + '&lt;/a&gt;'<span style="color: #000000;">;
            $(</span>"#selectTime"<span style="color: #000000;">).append(li);
        }
        </span><span style="color: #008000;">//</span><span style="color: #008000;">计算，使初始化加载的日期在中间位置</span>
        <span style="color: #0000ff;">var</span> width = $(".weekDaySelected").width(); <span style="color: #008000;">//</span><span style="color: #008000;">a标签（日期）所占宽度</span>
        <span style="color: #0000ff;">var</span> marginLeft = $(".weekDaySelected").offset().left; <span style="color: #008000;">//</span><span style="color: #008000;">a标签（日期）距离窗口左边的距离</span>
        $("#selectTime").scrollLeft(marginLeft - client_width / 2 + width / 2<span style="color: #000000;">);

        $(</span>"#selectTime").append('&lt;a onclick="goNext()"&gt;GO&amp;gt&amp;gt&lt;/a&gt;'<span style="color: #000000;">);
    }

    </span><span style="color: #008000;">//</span><span style="color: #008000;">加载数据</span>
    <span style="color: #0000ff;">function</span><span style="color: #000000;"> getSite() {
        
        </span><span style="color: #0000ff;">var</span> year =<span style="color: #000000;"> initTime.getFullYear();
        </span><span style="color: #0000ff;">var</span> month = initTime.getMonth() + 1 &lt; 10 ? "0" + (initTime.getMonth() + 1) : initTime.getMonth() + 1<span style="color: #000000;">;
        </span><span style="color: #0000ff;">var</span> day = initTime.getDate() &lt; 10 ? "0" +<span style="color: #000000;"> initTime.getDate() : initTime.getDate();
        </span><span style="color: #0000ff;">var</span> STime = year + "-" + month + "-" + day + " 00:00:00"<span style="color: #000000;">;
        </span><span style="color: #0000ff;">var</span> ETime = year + "-" + month + "-" + day + " 23:59:59"<span style="color: #000000;">;
        </span><span style="color: #0000ff;">var</span> week_day =<span style="color: #000000;"> initTime.getDay();

        </span><span style="color: #008000;">/*</span><span style="color: #008000;">*****************************************
            console.log("当前时间:" + initTime);
            console.log("当前年份:" + year);
            console.log("当前月份:" + month);
            console.log("当前天数:" + day);
            console.log("当前周几:" + week_day);
            console.log("开始时间:" + STime);
            console.log("结束时间:" + ETime);
        *****************************************</span><span style="color: #008000;">*/</span>

        <span style="color: #008000;">//</span><span style="color: #008000;">当前选中日期为星期几</span>
        <span style="color: #0000ff;">switch</span><span style="color: #000000;"> (week_day) {
            </span><span style="color: #0000ff;">case</span> 0: week_day = "日"; <span style="color: #0000ff;">break</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">case</span> 1: week_day = "一"; <span style="color: #0000ff;">break</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">case</span> 2: week_day = "二"; <span style="color: #0000ff;">break</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">case</span> 3: week_day = "三"; <span style="color: #0000ff;">break</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">case</span> 4: week_day = "四"; <span style="color: #0000ff;">break</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">case</span> 5: week_day = "五"; <span style="color: #0000ff;">break</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">case</span> 6: week_day = "六"; <span style="color: #0000ff;">break</span><span style="color: #000000;">;
        }
        $(</span>"#weekDay"<span style="color: #000000;">).html(week_day);

        </span><span style="color: #008000;">//</span><span style="color: #008000;">当前选中日期数据</span>
<span style="color: #000000;">        $.ajax({
            url: config.url() </span>+ "/WorkCenter/ajax/getdata.ashx?type=siteApplication&amp;r=" +<span style="color: #000000;"> Math.random(),
            dataType: </span>'json'<span style="color: #000000;">,
            type: </span>'post'<span style="color: #000000;">,
            data: { siteID: siteID, STime: STime, ETime: ETime },</span><span style="color: #008000;">//</span><span style="color: #008000;">场地id，开始时间，结束时间</span>
<span style="color: #000000;">            xhrFields: {
                withCredentials: </span><span style="color: #0000ff;">true</span><span style="color: #000000;">
            },
            success: </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> (res) {
                </span><span style="color: #0000ff;">var</span> table = '&lt;table width="100%" style="border-collapse:separate; border-spacing:15px;" id="siteList"&gt;' +
                                    '&lt;tr&gt;&lt;td colspan="2" class="siteName"&gt;&lt;/td&gt;&lt;/tr&gt;' +
                                '&lt;/table&gt;'<span style="color: #000000;">;
                $(</span>"#siteInfo"<span style="color: #000000;">).append(table);
                </span><span style="color: #0000ff;">if</span> (res.length &gt; 0<span style="color: #000000;">) {
                    </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> i = 0; i &lt; res.length; i++<span style="color: #000000;">) {
                        </span><span style="color: #0000ff;">var</span> sHou = <span style="color: #0000ff;">new</span> Date(res[i].StartTime).getHours() &lt; 10 ? "0" + <span style="color: #0000ff;">new</span> Date(res[i].StartTime).getHours() : <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(res[i].StartTime).getHours();
                        </span><span style="color: #0000ff;">var</span> sMin = <span style="color: #0000ff;">new</span> Date(res[i].StartTime).getMinutes() &lt; 10 ? "0" + <span style="color: #0000ff;">new</span> Date(res[i].StartTime).getMinutes() : <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(res[i].StartTime).getMinutes();
                        </span><span style="color: #0000ff;">var</span> startTime = sHou + ":" +<span style="color: #000000;"> sMin;
                        </span><span style="color: #0000ff;">var</span> eHou = <span style="color: #0000ff;">new</span> Date(res[i].EndTime).getHours() &lt; 10 ? "0" + <span style="color: #0000ff;">new</span> Date(res[i].EndTime).getHours() : <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(res[i].EndTime).getHours();
                        </span><span style="color: #0000ff;">var</span> eMin = <span style="color: #0000ff;">new</span> Date(res[i].EndTime).getMinutes() &lt; 10 ? "0" + <span style="color: #0000ff;">new</span> Date(res[i].EndTime).getMinutes() : <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(res[i].EndTime).getMinutes();
                        </span><span style="color: #0000ff;">var</span> endTime = eHou + ":" +<span style="color: #000000;"> eMin;
                        </span><span style="color: #0000ff;">var</span> row = '&lt;tr&gt;&lt;td class="time"&gt;' + startTime + '-' + endTime + '&lt;/td&gt;&lt;td class="reason"&gt;' + res[i].SiteScheduleName + '&lt;/td&gt;&lt;/tr&gt;'<span style="color: #000000;">;
                        $(</span>"#siteList"<span style="color: #000000;">).append(row);
                    }
                    $(</span>".siteName"<span style="color: #000000;">).html(siteName);
                }
                </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                    $(</span>".siteName").html("暂无预约"<span style="color: #000000;">);
                } 
            }
        })
    }

    </span><span style="color: #008000;">/*</span><span style="color: #008000;">*************************************************调用方法*************************************************</span><span style="color: #008000;">*/</span>
    
    <span style="color: #008000;">//</span><span style="color: #008000;">计算本月天数</span>
    <span style="color: #0000ff;">function</span><span style="color: #000000;"> getDaysInMonth(year, month) {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">本来标准时间的month应该为当前month-1，这里就使用当前month作为标准时间的month</span>
        month =<span style="color: #000000;"> parseInt(month);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">转化为标准时间后为下一个月的数据，设置day为0表示上个月最后一天，这样就切换到了所求月份的最后一天</span>
        <span style="color: #0000ff;">var</span> temp = <span style="color: #0000ff;">new</span> Date(year, month, 0<span style="color: #000000;">);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> temp.getDate();
    }

    </span><span style="color: #008000;">//</span><span style="color: #008000;">加载上个月数据</span>
    <span style="color: #0000ff;">function</span><span style="color: #000000;"> goPre() {
        initTime </span>= <span style="color: #0000ff;">new</span> Date(initTime.setDate(1<span style="color: #000000;">));
        initTime </span>= <span style="color: #0000ff;">new</span> Date(initTime.setMonth(initTime.getMonth() - 1<span style="color: #000000;">));
        $(</span>"#siteInfo").hide().show(500<span style="color: #000000;">);
        $(</span>"#selectTime"<span style="color: #000000;">).empty();
        $(</span>"#siteInfo"<span style="color: #000000;">).empty();
        get_month_day();</span><span style="color: #008000;">//</span><span style="color: #008000;">加载日期</span>
        getSite();<span style="color: #008000;">//</span><span style="color: #008000;">加载对应日期数据</span>
<span style="color: #000000;">       
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">加载下个月数据</span>
    <span style="color: #0000ff;">function</span><span style="color: #000000;"> goNext() {
        initTime </span>= <span style="color: #0000ff;">new</span> Date(initTime.setDate(1<span style="color: #000000;">));
        initTime </span>= <span style="color: #0000ff;">new</span> Date(initTime.setMonth(initTime.getMonth() + 1<span style="color: #000000;">));
        $(</span>"#siteInfo").hide().show(500<span style="color: #000000;">);
        $(</span>"#selectTime"<span style="color: #000000;">).empty();
        $(</span>"#siteInfo"<span style="color: #000000;">).empty();
        get_month_day();</span><span style="color: #008000;">//</span><span style="color: #008000;">加载日期</span>
        getSite();<span style="color: #008000;">//</span><span style="color: #008000;">加载对应日期数据</span>
<span style="color: #000000;">       
    }
    </span><span style="color: #008000;">//</span><span style="color: #008000;">本月切换日期</span>
    <span style="color: #008000;">//</span><span style="color: #008000;">选中后不再触发点击事件</span>
    <span style="color: #0000ff;">function</span><span style="color: #000000;"> a_click(obj) {
        </span><span style="color: #0000ff;">var</span> selectTime =<span style="color: #000000;"> $(obj).text();
        </span><span style="color: #0000ff;">var</span> Time = initTime.getFullYear() + "-" +<span style="color: #000000;"> selectTime;
        initTime </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> Date(Time);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">为上一个选中日期添加选中事件，移除现在选中日期的默认样式并添加选中样式，为上一个选中日期添加默认样式</span>
        $("#selectTime .weekDaySelected").attr("onclick", "a_click(this);"<span style="color: #000000;">);
        $(</span>"#selectTime .weekDaySelected").removeClass("weekDaySelected").addClass("a_fontColor"<span style="color: #000000;">);
        $(obj).removeClass(</span>"a_fontColor").addClass("weekDaySelected"<span style="color: #000000;">);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">加载数据的时候，页面会闪动，用动画效果来平滑过渡</span>
        $("#siteInfo").hide().show(500<span style="color: #000000;">);
        $(</span>"#siteInfo"<span style="color: #000000;">).empty();
        getSite();
        </span><span style="color: #008000;">//</span><span style="color: #008000;">为避免事件中途因意外停止，在点击事件完成后再移除现在选中日期的点击事件</span>
        $(obj).removeAttr("onclick"<span style="color: #000000;">);
    }</span></pre>
</div>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>